from fastapi import FastAPI

from baseTodo import Todo, UpdatedTodo
from typing import List


app = FastAPI()

db: List[Todo] = []

@app.get("/")
async def base():
    return {"base"}

@app.get("/api/todo")
async def get_todos():
    return db

@app.post("/api/todo")
async def create_todo(todo : str, ids : int):

    newTodo = Todo(task=todo, id=ids)
    db.append(newTodo)

    return newTodo

@app.put("/api/todo")
async def update_todo(newTask : str, id : int):

    updateTodo = UpdatedTodo(task= newTask)

    #updates the todo here
    for todo in db:
        if id == todo.id:
            todo.task = updateTodo.task
            return updateTodo

    return {"id not found"}

@app.delete("/api/todo")
async def delete_todo(id : int):

    for todo in db:
        if id == todo.id:
            db.remove(todo)
            return {"success"}
    
    return {"id not found"}